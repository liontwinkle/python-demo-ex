option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: core/wsgi.py

files:
    "/etc/httpd/conf.d/wsgi_custom.conf":
        mode: "000644"
        owner: root
        group: root
        content: |
            WSGIPassAuthorization On

container_commands:
    01_migrate:
        command: "source /opt/python/run/venv/bin/activate && source /opt/python/current/env && python manage.py migrate"
        leader_only: true
    02_collect_static:
        command: "source /opt/python/run/venv/bin/activate && source /opt/python/current/env && python manage.py collectstatic --noinput"

